<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Strategic Notification &amp; Operational Weather-watch (SNOW): com.logistics.snowapi.service.NWSDataService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Strategic Notification &amp; Operational Weather-watch (SNOW)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>com</b></li><li class="navelem"><b>logistics</b></li><li class="navelem"><b>snowapi</b></li><li class="navelem"><a class="el" href="namespacecom_1_1logistics_1_1snowapi_1_1service.html">service</a></li><li class="navelem"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html">NWSDataService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.logistics.snowapi.service.NWSDataService Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Service class for retrieving alert data from NWS and sending alerts through the WebSocket.  
 <a href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a962e4cc45b0658981d912950a0710e35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#a962e4cc45b0658981d912950a0710e35">NWSDataService</a> (RestTemplateBuilder restTemplateBuilder, ObjectMapper objectMapper, <a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1AlertService.html">AlertService</a> alertService, <a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1UgcZoneScraper.html">UgcZoneScraper</a> ugcZoneScraper, <a class="el" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository.html">AlertRepository</a> alertRepository, SimpMessagingTemplate messagingTemplate, <a class="el" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1UgcZoneRepository.html">UgcZoneRepository</a> ugcZoneRepository, <a class="el" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1UgcAlertRepository.html">UgcAlertRepository</a> ugcAlertRepository)</td></tr>
<tr class="separator:a962e4cc45b0658981d912950a0710e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85fdf15a5752a2b8d0b8763874779f15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#a85fdf15a5752a2b8d0b8763874779f15">fetchWeatherData</a> ()</td></tr>
<tr class="memdesc:a85fdf15a5752a2b8d0b8763874779f15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduled task that periodically fetches weather data from the National Weather Service (NWS) API every 60 seconds.  <a href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#a85fdf15a5752a2b8d0b8763874779f15">More...</a><br /></td></tr>
<tr class="separator:a85fdf15a5752a2b8d0b8763874779f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac40d6eaa1c02f2e2f82ff151a1e9d44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#aac40d6eaa1c02f2e2f82ff151a1e9d44">processGeoJsonResponse</a> (<a class="el" href="classcom_1_1logistics_1_1snowapi_1_1geojsonresponse_1_1GeoJsonResponse.html">GeoJsonResponse</a> geoJsonResponse)</td></tr>
<tr class="memdesc:aac40d6eaa1c02f2e2f82ff151a1e9d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a given <a class="el" href="">GeoJsonResponse</a> object containing weather alert information in GeoJSON format.  <a href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#aac40d6eaa1c02f2e2f82ff151a1e9d44">More...</a><br /></td></tr>
<tr class="separator:aac40d6eaa1c02f2e2f82ff151a1e9d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Service class for retrieving alert data from NWS and sending alerts through the WebSocket. </p>

<p class="definition">Definition at line <a class="el" href="NWSDataService_8java_source.html#l00032">32</a> of file <a class="el" href="NWSDataService_8java_source.html">NWSDataService.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a962e4cc45b0658981d912950a0710e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a962e4cc45b0658981d912950a0710e35">&#9670;&nbsp;</a></span>NWSDataService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">com.logistics.snowapi.service.NWSDataService.NWSDataService </td>
          <td>(</td>
          <td class="paramtype">RestTemplateBuilder&#160;</td>
          <td class="paramname"><em>restTemplateBuilder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObjectMapper&#160;</td>
          <td class="paramname"><em>objectMapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1AlertService.html">AlertService</a>&#160;</td>
          <td class="paramname"><em>alertService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1UgcZoneScraper.html">UgcZoneScraper</a>&#160;</td>
          <td class="paramname"><em>ugcZoneScraper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository.html">AlertRepository</a>&#160;</td>
          <td class="paramname"><em>alertRepository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SimpMessagingTemplate&#160;</td>
          <td class="paramname"><em>messagingTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1UgcZoneRepository.html">UgcZoneRepository</a>&#160;</td>
          <td class="paramname"><em>ugcZoneRepository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1UgcAlertRepository.html">UgcAlertRepository</a>&#160;</td>
          <td class="paramname"><em>ugcAlertRepository</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="NWSDataService_8java_source.html#l00046">46</a> of file <a class="el" href="NWSDataService_8java_source.html">NWSDataService.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                                                                                                                                                                                                                                                                              {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        this.restTemplate = restTemplateBuilder.build();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        this.objectMapper = objectMapper;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        this.alertService = alertService;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        this.ugcZoneScraper = ugcZoneScraper;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        this.alertRepository = alertRepository;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        this.messagingTemplate = messagingTemplate;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        this.ugcZoneRepository = ugcZoneRepository;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        this.ugcAlertRepository = ugcAlertRepository;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a85fdf15a5752a2b8d0b8763874779f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85fdf15a5752a2b8d0b8763874779f15">&#9670;&nbsp;</a></span>fetchWeatherData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.logistics.snowapi.service.NWSDataService.fetchWeatherData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scheduled task that periodically fetches weather data from the National Weather Service (NWS) API every 60 seconds. </p>
<p>This method performs an HTTP GET request to the specified NWS API endpoint, retrieves weather alert data in GeoJSON format, and then maps this data to a <a class="el" href="">GeoJsonResponse</a> object. The mapped data is subsequently processed to extract individual alerts and their related information, which are then persisted in the database. </p>
<p>This method is annotated with</p><div class="fragment"><div class="line">@Scheduled </div>
</div><!-- fragment --><p> , indicating that it is automatically run by the Spring framework at fixed intervals (every 60 seconds in this case), making it a self-contained scheduled task for weather data retrieval. </p>

<p class="definition">Definition at line <a class="el" href="NWSDataService_8java_source.html#l00068">68</a> of file <a class="el" href="NWSDataService_8java_source.html">NWSDataService.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                   {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="comment">// GET request from NWS api</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(url, String.class);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="comment">// Maps the response into a POJO containing all the alert data.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            GeoJsonResponse geoJsonResponse = objectMapper.readValue(response.getBody(), GeoJsonResponse.class);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <a class="code" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#aac40d6eaa1c02f2e2f82ff151a1e9d44">processGeoJsonResponse</a>(geoJsonResponse);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">catch</span> (RestClientException e) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            System.out.printf(<span class="stringliteral">&quot;Failed to reach address: %s, Error: %s\n&quot;</span>, url, e.getMessage());</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            e.printStackTrace();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">catch</span> (IOException e) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            System.out.printf(<span class="stringliteral">&quot;Failed to parse response for address: %s\n&quot;</span>, url);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            e.printStackTrace();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="ttc" id="aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_html_aac40d6eaa1c02f2e2f82ff151a1e9d44"><div class="ttname"><a href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#aac40d6eaa1c02f2e2f82ff151a1e9d44">com.logistics.snowapi.service.NWSDataService.processGeoJsonResponse</a></div><div class="ttdeci">void processGeoJsonResponse(GeoJsonResponse geoJsonResponse)</div><div class="ttdoc">Processes a given GeoJsonResponse object containing weather alert information in GeoJSON format.</div><div class="ttdef"><b>Definition:</b> <a href="NWSDataService_8java_source.html#l00106">NWSDataService.java:106</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_a85fdf15a5752a2b8d0b8763874779f15_cgraph.png" border="0" usemap="#aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_a85fdf15a5752a2b8d0b8763874779f15_cgraph" alt=""/></div>
<map name="aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_a85fdf15a5752a2b8d0b8763874779f15_cgraph" id="aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_a85fdf15a5752a2b8d0b8763874779f15_cgraph">
<area shape="rect" title="Scheduled task that periodically fetches weather data from the National Weather Service (NWS) API eve..." alt="" coords="5,5,260,47"/>
<area shape="rect" href="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService.html#aac40d6eaa1c02f2e2f82ff151a1e9d44" title="Processes a given GeoJsonResponse object containing weather alert information in GeoJSON format." alt="" coords="308,5,611,47"/>
<area shape="rect" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository.html#aeccca87a5a8c6931736cb38aa2f383fd" title="Checks if an alert with the specified NWS ID exists in the database." alt="" coords="659,5,897,47"/>
</map>
</div>

</div>
</div>
<a id="aac40d6eaa1c02f2e2f82ff151a1e9d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac40d6eaa1c02f2e2f82ff151a1e9d44">&#9670;&nbsp;</a></span>processGeoJsonResponse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.logistics.snowapi.service.NWSDataService.processGeoJsonResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1logistics_1_1snowapi_1_1geojsonresponse_1_1GeoJsonResponse.html">GeoJsonResponse</a>&#160;</td>
          <td class="paramname"><em>geoJsonResponse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a given <a class="el" href="">GeoJsonResponse</a> object containing weather alert information in GeoJSON format. </p>
<p>This method updates the database with new alerts and their associated geographic zone information. It iterates over each feature (alert) in the GeoJSON response, converts each feature into an alert object, and checks the database for its existence based on the alert's unique identifier. If the alert is new, it is sent in real-time over a WebSocket channel, persisted in the database, and related geographic zone data is scraped and also persisted. </p>
<p>Additionally, this method handles the persistence of relationships between alerts and geographic zones in the </p><div class="fragment"><div class="line">ugc_alert </div>
</div><!-- fragment --><p> many-to-many table. For each new alert, it associates the alert with its corresponding geographic zones (UGC Zones) and persists these associations in the database. </p>
<p>If no features (alerts) are present in the GeoJSON response, a log message is generated to indicate the absence of current weather alerts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">geoJsonResponse</td><td>The <a class="el" href="">GeoJsonResponse</a> object containing weather alert data in GeoJSON format. This object includes a list of features, where each feature represents a specific weather alert with its associated data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="NWSDataService_8java_source.html#l00106">106</a> of file <a class="el" href="NWSDataService_8java_source.html">NWSDataService.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                                        {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        List&lt;Feature&gt; allFeatures = geoJsonResponse.getFeatures();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (!allFeatures.isEmpty()) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            allFeatures.forEach(feature -&gt; { <span class="comment">// loop through every feature(alert)</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                Alert alert = feature.getFeatureAsAlert();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keywordflow">if</span> (alert.getNwsID() != <span class="keyword">null</span> &amp;&amp; !alertRepository.<a class="code" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository.html#aeccca87a5a8c6931736cb38aa2f383fd">existsByNwsID</a>(alert.getNwsID())) { <span class="comment">// checks if an alert is valid and if it already persists in the database</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    messagingTemplate.convertAndSend(<span class="stringliteral">&quot;/topic&quot;</span>, feature); <span class="comment">// TODO: needs logic to ensure that the alert belongs to a currently subscribed boundary</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    alert = alertService.createAlert(alert); <span class="comment">// persist alert entry in database</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    ugcZoneScraper.scrape(feature.getProperties().getUgcCodeAddress()); <span class="comment">// call ugc_zone scraper to ensure ugc_zone persistence in database</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    Alert finalAlert = alert; <span class="comment">// required because lambdas are silly</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    feature.getProperties().getUgcCodeAddress().forEach(url -&gt; { <span class="comment">// loop through every ugc_zone related to this alert</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        String ugcCode = url.substring(url.lastIndexOf(<span class="stringliteral">&#39;/&#39;</span>) + 1); <span class="comment">// Extracts the last segment from the URL as the UGC code</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                        System.out.println(<span class="stringliteral">&quot;Extracted UGC Code: &quot;</span> + ugcCode);  <span class="comment">// Debug output</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        System.out.println(<span class="stringliteral">&quot;Processing alert event: &quot;</span> + feature.getProperties().getEvent()); <span class="comment">// Debug output</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                        UgcZone ugcZone = ugcZoneRepository.findByUgcCode(ugcCode).orElse(null);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                        if (ugcZone != null &amp;&amp; finalAlert != null) { <span class="comment">// check if the ugcZone and alert are not null</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                            <span class="comment">// Persist the ugc_alert entry in the database</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                            UgcAlert ugcAlert = new UgcAlert();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                            UgcAlertId ugcAlertId = new UgcAlertId();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                            ugcAlertId.setUgcCode(ugcZone.getUgcCode());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                            ugcAlertId.setAlertId(finalAlert.getId());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                            ugcAlert.setId(ugcAlertId);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                            ugcAlert.setUgcCode(ugcZone);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                            ugcAlert.setAlert(finalAlert);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                            ugcAlertRepository.save(ugcAlert);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                            <span class="comment">// End persist ugc_alert</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                        } else {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                            System.out.println(<span class="stringliteral">&quot;Failed to save UgcAlert: UGC Zone or alert is null&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                            System.out.println(<span class="stringliteral">&quot;UgcZone: &quot;</span> + ugcZone + <span class="stringliteral">&quot; FinalAlert: &quot;</span> + finalAlert);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    });</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            });</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            System.out.println(<span class="stringliteral">&quot;No current weather alerts.&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="ttc" id="ainterfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository_html_aeccca87a5a8c6931736cb38aa2f383fd"><div class="ttname"><a href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository.html#aeccca87a5a8c6931736cb38aa2f383fd">com.logistics.snowapi.repository.AlertRepository.existsByNwsID</a></div><div class="ttdeci">boolean existsByNwsID(String nwsID)</div><div class="ttdoc">Checks if an alert with the specified NWS ID exists in the database.</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_aac40d6eaa1c02f2e2f82ff151a1e9d44_cgraph.png" border="0" usemap="#aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_aac40d6eaa1c02f2e2f82ff151a1e9d44_cgraph" alt=""/></div>
<map name="aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_aac40d6eaa1c02f2e2f82ff151a1e9d44_cgraph" id="aclasscom_1_1logistics_1_1snowapi_1_1service_1_1NWSDataService_aac40d6eaa1c02f2e2f82ff151a1e9d44_cgraph">
<area shape="rect" title="Processes a given GeoJsonResponse object containing weather alert information in GeoJSON format." alt="" coords="5,5,308,47"/>
<area shape="rect" href="interfacecom_1_1logistics_1_1snowapi_1_1repository_1_1AlertRepository.html#aeccca87a5a8c6931736cb38aa2f383fd" title="Checks if an alert with the specified NWS ID exists in the database." alt="" coords="356,5,595,47"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/java/com/logistics/snowapi/service/<a class="el" href="NWSDataService_8java_source.html">NWSDataService.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
